<!DOCTYPE html>
<html>
<head>
  <title>Test Syllabus Assessments Fetch</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    .syllabus { border: 1px solid #ccc; border-radius: 8px; margin-bottom: 1.5em; padding: 1em; }
    .syllabus-title { font-weight: bold; font-size: 1.2em; color: #DC2626; }
    .assessment { margin-left: 1em; margin-bottom: 0.5em; }
    .assessment-title { font-weight: bold; }
  </style>
</head>
<body>
  <h1>Syllabus Assessments Test</h1>
  <div id="output">Loading...</div>
  <script>
    fetch('/api/syllabus/my?facultyId=6')
      .then(res => res.json())
      .then(data => {
        const output = document.getElementById('output');
        if (!Array.isArray(data) || data.length === 0) {
          output.textContent = 'No syllabi found.';
          return;
        }
        output.innerHTML = '';
        data.forEach(syl => {
          const div = document.createElement('div');
          div.className = 'syllabus';
          div.innerHTML = `<div class="syllabus-title">${syl.title} (${syl.course_id})</div>` +
            `<div>Term: ${syl.term_id}</div>` +
            `<div>Assessments:</div>` +
            (Array.isArray(syl.assessments) && syl.assessments.length > 0
              ? syl.assessments.map(a => `<div class='assessment'><span class='assessment-title'>${a.title}</span> (${a.type}) - ${a.date}</div>`).join('')
              : '<div class="assessment">No assessments found.</div>');
          output.appendChild(div);
        });
      })
      .catch(err => {
        document.getElementById('output').textContent = 'Error fetching data: ' + err;
      });
  </script>
</body>
</html> 